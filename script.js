const modaInfantil = [
    {
        imagem: "produtos\\infantil\\infantil 0.jpg",
        nome: "Conjunto Infantil",
        preco: "25.00",
        preco_cartao: "27.00",
        descricao: "Algodão ",
        identificador: "MI001",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 1.jpg",
        imagem1: "produtos\\infantil\\infantil 1,1.jpg",
        nome: "Cueca Infantil",
        preco: "4.50",
        preco_cartao: "5.00",
        descricao: "personagem superman e homem aranha",
        identificador: "MI002",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 2.jpg",
        imagem1: "produtos\\infantil\\infantil 2,1.jpg",
        nome: "calcinha Infantil",
        preco: "4.50",
        preco_cartao: "5.00",
        descricao: "Algodão PMG/GG",
        identificador: "MI003",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 3.jpg",
        imagem1: "produtos\\infantil\\infantil 3,1.jpg",
        nome: "Calcinha Infantil",
        preco: "6.50",
        preco_cartao: "7.00",
        descricao: "Algodão PMG/GG",
        identificador: "MI004",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 4.jpg",
        nome: "Vestido Infantil ",
        preco: "25.00",
        preco_cartao: "27.00",
        descricao: "PMG Não garantimos a mesma estampa em todos os tamanhos.",
        identificador: "MI005",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 5.jpg",
        nome: "Vestido Infantil",
        preco: "25.00",
        preco_cartao: "27.00",
        descricao: "TAM: PMG Não garantimos mesma estampa em todos os tamanhos.",
        identificador: "MI006",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 6.jpg",
        imagem1: "produtos\\infantil\\infantil 6,1.jpg",
        nome: "top infantil",
        preco: "8.50",
        preco_cartao: "9.00",
        descricao: "TAM: PMG/GG",
        identificador: "MI007",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 7.jpg",
        nome: "Cueca Infantil",
        preco: "10.00",
        preco_cartao: "11.00",
        descricao: "TAM: PMG/GG",
        identificador: "MI008",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 8.jpg",
        nome: "Kit Meia Infantil",
        preco: "8.00",
        preco_cartao: "9.00",
        descricao: "",
        identificador: "MI009",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 9.jpg",
        imagem1: "produtos\\infantil\\infantil 9,1.jpg",
        nome: "Kit Meia Infantil",
        preco: "16.50",
        preco_cartao: "18.00",
        descricao: "",
        identificador: "MI010",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 10.jpg",
        nome: "SHort Infantil",
        preco: "16.00",
        preco_cartao: "17.00",
        descricao: "1 a 8 anos",
        identificador: "MI011",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 11.jpg",
        imagem1: "produtos\\infantil\\infantil 11,1.jpg",
        imagem2: "produtos\\infantil\\infantil 11,2.jpg",
        imagem3: "produtos\\infantil\\infantil 11,3.jpg",
        imagem4: "produtos\\infantil\\infantil 11,4.jpg",
        imagem5: "produtos\\infantil\\infantil 11,5.jpg",
        imagem6: "produtos\\infantil\\infantil 11,6.jpg",
        imagem7: "produtos\\infantil\\infantil 11,7.jpg",
        imagem8: "produtos\\infantil\\infantil 11,8.jpg",
        imagem9: "produtos\\infantil\\infantil 11,9.jpg",
        nome: "Vestido Infantil",
        preco: "25.00",
        preco_cartao: "27.00",
        descricao: "",
        identificador: "MI012",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 12.jpg",
        nome: "Bermuda Infantil",
        preco: "40.00",
        preco_cartao: "42.00",
        descricao: "",
        identificador: "MI013",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 13.jpg",
        imagem1: "produtos\\infantil\\infantil 13,1.jpg",
        imagem2: "produtos\\infantil\\infantil 13,2.jpg",
        nome: "Kit Calcinha Diamante (Infantil) ",
        preco: "130.00",
        preco_cartao: "120",
        descricao: "kit com 7 peças PMG/GG",
        identificador: "MI014",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 14.jpg",
        imagem1: "produtos\\infantil\\infantil 14,1.jpg",
        imagem2: "produtos\\infantil\\infantil 14,2.jpg",
        imagem3: "produtos\\infantil\\infantil 14,3.jpg",
        imagem4: "produtos\\infantil\\infantil 14,4.jpg",
        imagem5: "produtos\\infantil\\infantil 14,5.jpg",
        nome: "Baby Doll Infantil",
        preco: "25.00",
        preco_cartao: "27.00",
        descricao: "tamanho P ao EX; Não tem no atacado",
        identificador: "MI015",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 15.jpg",
        imagem1: "produtos\\infantil\\infantil 15,1.jpg",
        nome: "Conjunto Juvenil",
        preco: "16.00",
        preco_cartao: "17.00",
        descricao: "PMG/GG",
        identificador: "MI016",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 16.jpg",
        imagem1: "produtos\\infantil\\infantil 16,1.jpg",
        imagem2: "produtos\\infantil\\infantil 16,2.jpg",
        imagem3: "produtos\\infantil\\infantil 16,3.jpg",
        imagem4: "produtos\\infantil\\infantil 16,4.jpg",
        imagem5: "produtos\\infantil\\infantil 16,5.jpg",
        nome: "Kit Cueca Diamante",
        preco: "164.00",
        preco_cartao: "176.00",
        descricao: "Kit com 4 peças personalizadas Infantil; tamanho PMG/GG",
        identificador: "MI017",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 17.jpg",
        nome: "Cueca Infantil",
        preco: "10.00",
        preco_cartao: "11.00",
        descricao: "Tecido algodão",
        identificador: "MI018",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 18.jpg",
        nome: "Camisa Infantil",
        preco: "20.00",
        preco_cartao: "24.00",
        descricao: "Tecido algodão; de 1 a 16 anos",
        identificador: "MI019",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 19.jpg",
        nome: "Toalha Infantil",
        preco: "26.00",
        preco_cartao: "28.00",
        descricao: "Tecido algodão, tamanho 1,30x70cm",
        identificador: "MI020",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 20.jpg",
        nome: "Calcinha Infantil",
        preco: "6.50",
        preco_cartao: "7.50",
        descricao: "tamanho PMG/GG",
        identificador: "MI021",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 21.jpg",
        nome: "Cueca Lupo Infantil",
        preco: "23.00",
        preco_cartao: "25.00",
        descricao: "tamanho PP/P/M/G/GG",
        identificador: "MI022",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 22.jpg",
        nome: "Calcinha Box Infantil",
        preco: "5.50",
        preco_cartao: "6.00",
        descricao: "",
        identificador: "MI023",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 23.jpg",
        imagem1: "produtos\\infantil\\infantil 23,1.jpg",
        imagem2: "produtos\\infantil\\infantil 23,2.jpg",
        imagem3: "produtos\\infantil\\infantil 23,3.jpg",
        imagem4: "produtos\\infantil\\infantil 23,4.jpg",
        imagem5: "produtos\\infantil\\infantil 23,5.jpg",
        imagem6: "produtos\\infantil\\infantil 23,6.jpg",
        imagem7: "produtos\\infantil\\infantil 23,7.jpg",
        imagem8: "produtos\\infantil\\infantil 23,8.jpg",
        nome: "Baby Doll Infantil",
        preco: "16.50",
        preco_cartao: "19.00",
        descricao: "tamanho PMG/G",
        identificador: "MI024",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 24.jpg",
        nome: "Calcinha Infantil",
        preco: "6.50",
        preco_cartao: "7.00",
        descricao: "tamanho PMG/GG",
        identificador: "MI025",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 25.jpg",
        nome: "Calcinha Infantil",
        preco: "7.50",
        preco_cartao: "8.00",
        descricao: "Tecido algodão Tamanhos P/M/G/GG",
        identificador: "MI026",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 26.jpg",
        nome: "Kit Calcinha Diamante",
        preco: "164.00",
        preco_cartao: "176.00",
        descricao: "Kit com 7",
        identificador: "MI027",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 27.jpg",
        nome: "Rede berço",
        preco: "130.00",
        preco_cartao: "160.00",
        descricao: "",
        identificador: "MI028",
        categoria: "Infantil"
    },
    {
        imagem: "produtos\\infantil\\infantil 28.jpg",
        imagem1: "produtos\\infantil\\infantil 28,1.jpg",
        nome: "Kit Cueca Diamante",
        preco: "164.00",
        preco_cartao: "176.00",
        descricao: "Tecido algodão; kit com 4 peças personalizadas infantil",
        identificador: "MI029",
        categoria: "Infantil"
    },
];
const modaCalcinha = [
    {
        imagem: "produtos/Calcinha/calcinha 0.jpg",
        nome: "Calcinha Fio Duplo",
        preco: "9.50",
        preco_cartao: "12.50",
        descricao: "Valor Promocional PMG/GG",
        identificador: "MC001",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 1.jpg",
        nome: "Calcinha Box",
        preco: "11.00",
        preco_cartao: "12.50",
        descricao: "Tamanho PMG/GG",
        identificador: "MC002",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 2.jpg",
        nome: "Calcinha Renda",
        preco: "13.00",
        preco_cartao: "15.00",
        descricao: "Tamanho PMG/GG",
        identificador: "MC003",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 3.jpg",
        nome: "Calcinha Variadas",
        preco: "6.00",
        preco_cartao: "6.50",
        descricao: "Valor Promocional PMG",
        identificador: "MC004",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 4.jpg",
        nome: "Calcinha sem Costura",
        preco: "8.35",
        preco_cartao: "9.00",
        descricao: "",
        identificador: "MC005",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 5.jpg",
        nome: "Calcinha Cinta",
        preco: "23.00",
        preco_cartao: "26.00",
        descricao: "Tamanho PMG/GG",
        identificador: "MC006",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 6.jpg",
        nome: "Kit Calcinha Diamante",
        preco: "110.00",
        preco_cartao: "120.00",
        descricao: "Tamanho PMG/G algodão",
        identificador: "MC007",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 7.jpg",
        imagem1: "produtos/Calcinha/calcinha 7,1.jpg",
        nome: "Kit calcinha diamante",
        preco: "130.00",
        preco_cartao: "139.00",
        descricao: " kit com 3 Calcinhas Tamanho PMG",
        identificador: "MC008",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 8.jpg",
        imagem1: "produtos/Calcinha/calcinha 8,1.jpg",
        nome: "Calcinha Algodão",
        preco: "17.00",
        preco_cartao: "18.00",
        descricao: "Tamanho PMG/GG R$ 18,00 tamanho GG R$ 19,00",
        identificador: "MC009",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 9.jpg",
        imagem1: "produtos/Calcinha/calcinha 9,1.jpg",
        nome: "Calcinha com Frases",
        preco: "20.00",
        preco_cartao: "22.50",
        descricao: "Tamanho Unico",
        identificador: "MC010",
        categoria: "Calcinha",
    },
    {
        imagem: "produtos/Calcinha/calcinha 10.jpg",
        imagem1: "produtos/Calcinha/calcinha 10,1.jpg",
        nome: "Kit de Calcinha Diamantes",
        preco: "105.00",
        preco_cartao: "112.00",
        descricao: "kit com 3 Calcinhas Tamanho PMG",
        identificador: "MC011",
        categoria: "Calcinha",
    },
]
const seccaoDetalhes = document.querySelector(".seccao_especifica");

function renderizarProdutos(categoriaId, produtos) {
    const secao = document.querySelector(`#${categoriaId}`);
    const container = secao.querySelector(".produtos");
    container.innerHTML = ""; // Limpa antes de adicionar novos produtos

    if (container.children.length > 0) return; // Evita duplicação

    const containerGeral = secao.querySelector(".container");

    produtos.forEach(prod => {
        const divProduto = document.createElement("div");
        divProduto.classList.add("produto");

        divProduto.innerHTML = `
            <img class="imagem" src="${prod.imagem}" alt="${prod.nome}">
            <h3 class="nome_produto">${prod.nome}</h3>
            <button class="preco">R$ ${prod.preco}</button>
            <p class="descricao">${prod.descricao}</p>
        `;

        divProduto.addEventListener("click", () => {
            document.querySelectorAll("section").forEach(section => {
                section.style.display = "none";
            });

            containerGeral.style.display = "none";
            seccaoDetalhes.style.display = "grid";

            const imagensExtras = [prod.imagem];
            for (let i = 1; i <= 8; i++) {
                const key = "imagem" + i;
                if (prod[key]) imagensExtras.push(prod[key]);
            }

            seccaoDetalhes.innerHTML = `
                <div class="detalhes-produto">
                    <button class="fechar-detalhes"><i class="bi bi-x-circle"></i></button>
                    <h3>${prod.nome}</h3>
                    <div class="detalhes">
                        <img class="principal" src="${prod.imagem}" alt="${prod.nome}">
                        <div class="informacoes">
                            <p><strong>Preço à vista:</strong> R$ ${prod.preco}</p>
                            <p><strong>Preço no cartão:</strong> R$ ${prod.preco_cartao}</p>
                            <p><strong>Descrição: </strong>${prod.descricao}</p>
                            <button class="adicionar-carrinho">Adicionar ao Carrinho</button>
                        </div>
                    </div>
                    <div class="galeria">
                        ${imagensExtras.map(src => `<img src="${src}" alt="${prod.nome}">`).join("")}
                    </div>
                </div>
            `;

            const imgPrincipal = seccaoDetalhes.querySelector(".principal");
            seccaoDetalhes.querySelectorAll(".galeria img").forEach(mini => {
                mini.addEventListener("click", () => {
                    imgPrincipal.src = mini.src;
                });
            });

            seccaoDetalhes.querySelector(".fechar-detalhes").addEventListener("click", () => {
                seccaoDetalhes.style.display = "none";
                containerGeral.style.display = "grid";

                document.querySelectorAll("section").forEach(section => {
                    section.style.display = "grid";
                });

                resetarLayoutProdutos();
            });

            // Lógica de adicionar ao carrinho
            seccaoDetalhes.querySelector(".adicionar-carrinho").addEventListener("click", () => {
                const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
                const produtoCarrinho = {
                    identificador: prod.identificador,
                    nome: prod.nome,
                    preco: prod.preco,
                    preco_cartao: prod.preco_cartao,
                    imagem: prod.imagem,
                    descricao: prod.descricao,
                    categoria: prod.categoria,
                    quantidade: 1
                };


                const index = carrinho.findIndex(item => item.identificador === produtoCarrinho.identificador);
                if (index !== -1) {
                    carrinho[index].quantidade += 1;
                } else {
                    carrinho.push(produtoCarrinho);
                }

                localStorage.setItem("carrinho", JSON.stringify(carrinho));
                alert(`${prod.nome} foi adicionado ao carrinho!`);
            });
        });

        container.appendChild(divProduto);
    });
}

function resetarLayoutProdutos() {
    document.querySelectorAll("section .produtos").forEach(container => {
        container.style.removeProperty("display");
        container.style.transition = "all 0.3s ease";
    });

    document.querySelectorAll("section").forEach(secao => {
        secao.style.display = "";
    });
}
const botaoCarrinho = document.getElementById("carrinho");
const sessaoCarrinho = document.getElementById("sessao-carrinho");

botaoCarrinho.addEventListener("click", () => {
    sessaoCarrinho.style.display = "block";
    carregarCarrinho();
});

function fecharCarrinho() {
    sessaoCarrinho.style.display = "none";
}

function carregarCarrinho() {
    const container = document.getElementById("lista-carrinho");
    const totalContainer = document.getElementById("total-carrinho");
    container.innerHTML = "";

    let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
    let total = 0;

    carrinho.forEach((prod, index) => {
        const subtotal = parseFloat(prod.preco) * prod.quantidade;
        total += subtotal;

        const item = document.createElement("div");
        item.classList.add("item-carrinho");


        item.innerHTML = `
            <div class="item-carrinho">
                <img src="${prod.imagem}" alt="${prod.nome}" class="imagem-carrinho">

            <div>
                <p><strong>Descrição:</strong> ${prod.descricao}</p>
                <p><strong>Categoria:</strong> ${prod.categoria}</p>
                <p><strong>Preço à vista:</strong> R$ ${prod.preco}</p>
                <p><strong>Preço no cartão:</strong> R$ ${prod.preco_cartao}</p>
                <p><strong>Subtotal:</strong> R$ ${subtotal.toFixed(2)}</p>
            </div>

            <div class="controle-quantidade">
                <button class="btn-menos">-</button>
                <span class="quantidade">${prod.quantidade}</span>
                <button class="btn-mais">+</button>
            </div>
            </div>
            `;

        // Botão -
        item.querySelector(".btn-menos").addEventListener("click", () => {
            if (prod.quantidade > 1) {
                carrinho[index].quantidade--;
            } else {
                carrinho.splice(index, 1); // Remove se for 1
            }
            localStorage.setItem("carrinho", JSON.stringify(carrinho));
            carregarCarrinho();
        });

        // Botão +
        item.querySelector(".btn-mais").addEventListener("click", () => {
            carrinho[index].quantidade++;
            localStorage.setItem("carrinho", JSON.stringify(carrinho));
            carregarCarrinho();
        });

        container.appendChild(item);
    });

    totalContainer.innerText = `Total: R$ ${total.toFixed(2)}`;
}


renderizarProdutos("moda-infantil", modaInfantil);
renderizarProdutos("moda-calcinha", modaCalcinha);
resetarLayoutProdutos();

